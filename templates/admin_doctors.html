{% extends "base.html" %}
{% block content %}
<h2>Manage Doctors</h2>

<form method="get">
    <label>Search (name / email / specialization):</label>
    <input type="text" name="q" value="{{ q }}" placeholder="Type to search...">
    <button type="submit">Search</button>
    {% if q %}
        <a href="{{ url_for('admin_doctors') }}">Clear</a>
    {% endif %}
</form>

<br>

<p><a href="{{ url_for('admin_create_doctor') }}">Add New Doctor</a></p>

<table border="1" cellpadding="5" cellspacing="0">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Specialization</th>
        <th>Active</th>
        <th>Actions</th>
    </tr>
    {% for d in doctors %}
    <tr>
        <td>{{ d.id }}</td>
        <td>{{ d.name }}</td>
        <td>{{ d.email }}</td>
        <td>{{ d.specialization or '-' }}</td>
        <td>{{ 'Yes' if d.is_active_flag else 'No' }}</td>
       <td>
    <a href="{{ url_for('admin_edit_doctor', doctor_id=d.id) }}">Edit</a> |
    <a href="{{ url_for('admin_toggle_doctor_active', doctor_id=d.id) }}">
        {{ 'Deactivate' if d.is_active_flag else 'Activate' }}
    </a>
</td>
    </tr>
    {% else %}
    <tr>
        <td colspan="6">No doctors found.</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
